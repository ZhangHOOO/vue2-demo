(window.webpack_jsonp_ssr_genesis=window.webpack_jsonp_ssr_genesis||[]).push([[2],{177:function(t,e,n){"use strict";n.r(e);var r=n(211),u=n(183);for(var a in u)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(a);var i=n(57),s=Object(i.a)(u.default,r.a,r.b,!1,null,null,null);e.default=s.exports},179:function(t,e,n){"use strict";n.r(e);var r=n(180),u=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=u.a},180:function(t,e,n){"use strict";var r=n(9);n(102),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u,a,i,s,o,c=r(n(196)),f=r(n(31)),l=r(n(30)),d=r(n(60)),p=r(n(100)),v=r(n(101)),h=r(n(54)),g=r(n(197)),y=(r(n(198)),r(n(16))),m=n(182);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,h.default)(t);if(e){var u=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return(0,v.default)(this,n)}}var _=(u=(0,m.Component)({}),a=(0,m.Prop)({type:String,default:""}),u((s=function(t){(0,p.default)(n,t);var e=b(n);function n(){var t;(0,l.default)(this,n);for(var r=arguments.length,u=new Array(r),a=0;a<r;a++)u[a]=arguments[a];return t=e.call.apply(e,[this].concat(u)),(0,c.default)(t,"title",o,(0,d.default)(t)),t}return(0,f.default)(n)}(y.default),o=(0,g.default)(s.prototype,"title",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=s))||i);e.default=_},181:function(t,e,n){},183:function(t,e,n){"use strict";n.r(e);var r=n(184),u=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=u.a},184:function(t,e,n){"use strict";var r=n(9);n(102),n(191),n(55),n(35),n(36),n(204),n(205),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n(17));n(13);var a,i=r(n(18)),s=r(n(30)),o=r(n(31)),c=r(n(109)),f=r(n(100)),l=r(n(101)),d=r(n(54)),p=n(182),v=r(n(185)),h=n(187),g=n(206);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.default)(t);if(e){var u=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var m=(0,p.Component)({components:{VHeader:v.default},metaInfo:function(){return{title:"首页"}}})(a=function(t){(0,f.default)(a,t);var e,n,r=y(a);function a(){var t;(0,s.default)(this,a);for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return(t=r.call.apply(r,[this].concat(n))).blog="",t.formatDate=g.formatDate,t}return(0,o.default)(a,[{key:"isLogin",get:function(){return!!this.state.user.name}},{key:"blogList",get:function(){return this.state.blogList}},{key:"post",value:(n=(0,i.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.postBlog(this.blog);case 2:t.sent&&(this.blog="");case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"signout",value:(e=(0,i.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request.post("/api/signout");case 2:if(!t.sent.success){t.next=6;break}return(0,c.default)((0,d.default)(a.prototype),"signout",this).call(this),t.abrupt("return");case 6:alert("退出失败");case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"serverPrefetch",value:function(){return Promise.all([this.getCurrentUser(),this.getBlogList()])}}]),a}(h.BaseVue))||a;e.default=m},185:function(t,e,n){"use strict";n.r(e);var r=n(190),u=n(179);for(var a in u)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(a);n(186);var i=n(57),s=Object(i.a)(u.default,r.a,r.b,!1,null,"6b5d0bca",null);e.default=s.exports},186:function(t,e,n){"use strict";n(181)},187:function(t,e,n){"use strict";var r=n(9);n(55),Object.defineProperty(e,"__esModule",{value:!0}),e.BaseVue=void 0;var u=r(n(17));n(13);var a=r(n(18)),i=r(n(30)),s=r(n(31)),o=r(n(100)),c=r(n(101)),f=r(n(54));function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.default)(t);if(e){var u=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var d=function(t){(0,o.default)(f,t);var e,n,r,c=l(f);function f(){return(0,i.default)(this,f),c.apply(this,arguments)}return(0,s.default)(f,[{key:"state",get:function(){return this.$store.state}},{key:"request",get:function(){return this.$root.$options.request}},{key:"signin",value:function(t){this.$store.commit("signin",t)}},{key:"signout",value:function(){this.$store.commit("signin","")}},{key:"getBlogList",value:(r=(0,a.default)(u.default.mark((function t(){var e;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request.get("/api/blog/list");case 2:(e=t.sent).success&&this.$store.commit("getBlogList",e.data.list);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"postBlog",value:(n=(0,a.default)(u.default.mark((function t(e){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request.post("/api/blog",{author:this.state.user.name,content:e});case 2:if(!t.sent.success){t.next=6;break}return this.getBlogList(),t.abrupt("return",!0);case 6:return alert("发表失败"),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getCurrentUser",value:(e=(0,a.default)(u.default.mark((function t(){var e;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request.get("/api/current-user");case 2:if(!(e=t.sent).success){t.next=5;break}return t.abrupt("return",this.signin(e.data.name));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),f}(r(n(16)).default);e.BaseVue=d},190:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return u}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"header"},[this.title?e("h2",{staticClass:"title"},[this._v(this._s(this.title))]):this._e()])},u=[]},206:function(t,e,n){"use strict";n(207),n(209),Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=void 0;e.formatDate=function(t){if(!t)return"";var e=new Date(Number(t)),n=(new Date).getTime()-e.getTime();return n<0?"":n/1e3<30?"刚刚":n/1e3<60?parseInt(String(n/1e3))+"秒前":n/6e4<60?parseInt(String(n/6e4))+"分钟前":n/36e5<24?parseInt(String(n/36e5))+"小时前":n/864e5<31?parseInt(String(n/864e5))+"天前":n/2592e6<12?parseInt(String(n/2592e6))+"月前":parseInt(String(n/31536e6))+"年前"}},211:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return u}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("VHeader",{attrs:{title:"首页"}}),t._v(" "),t.isLogin?n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.blog,expression:"blog"}],domProps:{value:t.blog},on:{input:function(e){e.target.composing||(t.blog=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.post}},[t._v("发表微博")]),t._v(" "),n("button",{on:{click:t.signout}},[t._v("退出登录")])]):n("p",[n("router-link",{attrs:{to:"/signin"}},[t._v("登录")]),t._v("后发表你的微博\n    ")],1),t._v(" "),n("ul",t._l(t.blogList,(function(e){return n("li",{key:e.id},[t._v("\n            "+t._s(t.formatDate(e.createTime))+" "+t._s(e.author)+" 发表了\n            "+t._s(e.content)+"\n        ")])})),0)],1)},u=[]}}]);